<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>task4</title>
	<script src="//d3js.org/d3.v3.min.js"></script>
	<script src="//d3js.org/d3.geo.projection.v0.min.js"></script>
	<script src="//d3js.org/topojson.v1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js"></script>

	<style>
        body {
            background-color: white;
        }

        .country {
            fill: #e3e3e3;
            /*stroke: #766951;*/
			stroke: #828282;
			stroke-width: .5px;
        }

		.selected{
			fill: #c3c3c3;
		}

		.graticule {
            fill: none;
            stroke: #d8d8d8;
            stroke-width: .5px;
        }

        .graticule :nth-child(2n) {
            stroke-dasharray: 2, 2;
        }

    </style>

</head>

<body>
	<script>
        var num = 1,
            width = 868 * num,
            height = 500 * num,
            scale = 159 * num;

        var graticule = d3.geo.graticule();

        var projection = d3.geo.kavrayskiy7()
            .scale(scale)
            .translate([width / 2, height / 2]);

        let svg = d3.select('body')
            .append('svg')
            .attr('width', width)
			.attr('height', height);

		var path = d3.geo.path()
			.projection(projection);

        queue()
            .defer(d3.json, "world-110m2.json")
            .await(ready);

        function ready(error, country_data) {
            // console.log(country_data)

			var countries = topojson.feature(country_data, country_data.objects.countries).features;
			// console.log(countries);
			svg.append("g")
				.selectAll(".country")
				.data(countries)
				.enter().append("path")
				.attr("class", "country")
				.attr("d", path)
				.on("mouseover", function (d) {
					d3.select(this).classed("selected",true);
                })
				.on("mouseout", function (d) {
					d3.select(this).classed("selected",false);
                });

			svg.append("g")
				.append('path')
				.datum(graticule)
				.attr('class', 'graticule')
				.attr('d', path);

			svg.append('path')
				.datum(graticule.outline)
				.attr('fill', 'none')
				.attr('stroke','black')
				.attr('d', path);


        }
	</script>
</body>
</html>