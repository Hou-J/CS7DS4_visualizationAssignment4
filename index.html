<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>task4</title>
	<script src="http://d3js.org/d3.v4.min.js"></script>
	<script src="http://d3js.org/topojson.v1.min.js"></script>

	<style>
        body {
            background-color: white;
        }

        svg {
            border: 1px solid black;
            background-color: #ffffff;
        }

        .country {
            fill: #e3e3e3;
            stroke: #766951;
        }

		.selected{
			fill: #c3c3c3;
		}

        .graticule {
            fill: none;
            stroke: #bdbdbd;
            stroke-width: .5px;
        }

        .graticule :nth-child(2n) {
            stroke-dasharray: 2, 2;
        }

    </style>

</head>

<body>
	<script>
        var num = 2,
            width = 628 * num,
            height = 628 * num,
            map_height_reduce = 260 * num,
            map_translate_reduce = 73 * num,
            scale = 100 * num;

		var svg = d3.select("body").append("svg")
		    .attr("width", width)
		    .attr("height", height - map_height_reduce);

		var projection = d3.geoMercator()
			.scale(scale)
		    .translate([width / 2, height / 2 - map_translate_reduce]);

		var path = d3.geoPath()
			.projection(projection);

        d3.queue()
            .defer(d3.json, "world-110m2.json")
            .await(ready);

        function ready(error, country_data) {
            // console.log(country_data)

			var countries = topojson.feature(country_data, country_data.objects.countries).features;
			console.log(countries);
			svg.append("g")
				.selectAll(".country")
				.data(countries)
				.enter().append("path")
				.attr("class", "country")
				.attr("d", path)
				.on("mouseover", function (d) {
					d3.select(this).classed("selected",true);
                })
				.on("mouseout", function (d) {
					d3.select(this).classed("selected",false);
                });

			var graticule = d3.geoGraticule();

			svg.append("g")
				.attr("class", "graticule")
				.selectAll("path")
				.data(graticule.lines)
				.enter().append("path")
				.attr("d", path);

        }
	</script>
</body>
</html>